# Справочник зданий Happy Home - Инструкция по дополнению

## Обзор

Справочник зданий Happy Home предназначен для автоматического заполнения полей при добавлении недвижимости. Система автоматически подставляет год постройки, этажность и материал стен на основе выбранного адреса.

## Структура данных

### Основные поля справочника:

- **street** - Название улицы (нормализованное)
- **houseNumber** - Номер дома
- **fullAddress** - Полный адрес для поиска
- **districtId** - Связь с районом
- **yearBuilt** - Год постройки
- **totalFloors** - Общая этажность здания
- **wallMaterial** - Материал стен
- **entranceCount** - Количество подъездов
- **buildingType** - Тип здания (жилой, коммерческий)
- **hasElevator** - Наличие лифта
- **confidenceLevel** - Уровень достоверности данных
- **dataSource** - Источник данных

## Источники данных для дополнения

### 1. 2GIS.kz
**URL**: https://2gis.kz/petropavlovsk

**Как собирать данные:**
1. Поиск по адресу в Петропавловске
2. Получение информации о здании:
   - Год постройки
   - Этажность
   - Материал стен
   - Количество подъездов
   - Наличие лифта

**Пример поиска:**
```
Поиск: \"Абая 102 Петропавловск\"
Результат: 5-этажный панельный дом 1980 года, 12 подъездов
```

### 2. Krisha.kz
**URL**: https://krisha.kz

**Как использовать:**
1. Фильтр по городу: Петропавловск
2. Поиск объявлений по адресам
3. Извлечение характеристик зданий из описаний
4. Сбор информации о новостройках

### 3. Kartoteka.kz
**URL**: https://kartoteka.kz

**Полезно для:**
- Получения официальных данных о зданиях
- Проверки года постройки
- Информации о материалах стен

### 4. Google Maps / Яндекс.Карты
**Использование:**
- Проверка существования адресов
- Визуальная оценка типа здания
- Определение новостроек

## Новостройки Петропавловска (2020-2024)

### Известные новостройки для добавления:

1. **ЖК \"Астана\"** - ул. Конституции
   - Годы: 2020-2022
   - Материал: Кирпич-монолит
   - Этажность: 9-12 этажей

2. **ЖК \"Премиум\"** - ул. Жумабаева
   - Годы: 2021-2023
   - Материал: Монолит
   - Этажность: 10-14 этажей

3. **ЖК \"Европейский\"** - ул. Айыртауская
   - Годы: 2019-2021
   - Материал: Кирпич
   - Этажность: 9 этажей

4. **Малоэтажная застройка** - различные районы
   - Годы: 2020-2024
   - Материал: Кирпич, Газобетон
   - Этажность: 2-3 этажа

## Процесс дополнения справочника

### Шаг 1: Сбор данных

1. **Создайте CSV файл** с колонками:
```csv
full_address,street,house_number,floors,year_built,wall_material,entrance_count,coordinates,data_source,confidence_level
```

2. **Заполните данные** по образцу:
```csv
\"Конституции, 76а\",Конституции,76а,12,2021,Кирпич-монолит,4,,2gis+internet_search,high
\"Жумабаева, 400\",Жумабаева,400,14,2022,Монолит,6,,krisha+visual,medium
```

### Шаг 2: Нормализация данных

**Правила нормализации названий улиц:**
- Полные названия: \"Интернациональная\" вместо \"Интер-ая\"
- Правильные сокращения: \"проспект\" вместо \"пр\"
- Единообразие: \"Зои Космодемьянской\" вместо \"З.косм-й\"

**Стандартизация материалов стен:**
- Кирпич
- Панель
- Монолит
- Кирпич-панель
- Кирпич-монолит
- Газобетон
- Дерево
- Шлакоблок

### Шаг 3: Импорт через интерфейс

1. Перейдите на страницу `/buildings-import`
2. Загрузите подготовленный CSV файл
3. Дождитесь обработки и проверьте результаты
4. Исправьте ошибки при необходимости

## Шаблон для новых данных

### Новостройки CSV шаблон:
```csv
full_address,street,house_number,floors,year_built,wall_material,entrance_count,coordinates,data_source,confidence_level
\"Конституции, 80\",Конституции,80,10,2023,Монолит,4,,manual,medium
\"Айыртауская, 25\",Айыртауская,25,9,2021,Кирпич,3,,2gis,high
\"Жумабаева, 405\",Жумабаева,405,12,2022,Кирпич-монолит,5,,krisha,medium
```

### Малоэтажная застройка:
```csv
full_address,street,house_number,floors,year_built,wall_material,entrance_count,coordinates,data_source,confidence_level
\"Садовая, 15\",Садовая,15,2,2023,Газобетон,1,,visual,low
\"Березовая, 8\",Березовая,8,3,2022,Кирпич,2,,manual,medium
```

## Проверка качества данных

### Уровни достоверности:

- **HIGH** - Данные из 2GIS + дополнительные источники
- **MEDIUM** - Данные из одного надежного источника
- **LOW** - Визуальная оценка или неподтвержденные данные

### Обязательная проверка:

1. **Существование адреса** - проверить на картах
2. **Корректность года** - не раньше 1800, не позже текущего года
3. **Реалистичность этажности** - 1-50 этажей
4. **Соответствие материалов** - использовать стандартные термины

## API для программного добавления

### Добавление одного здания:
```javascript
POST /api/buildings/search
{
  \"street\": \"Конституции\",
  \"houseNumber\": \"80\",
  \"districtId\": \"district_id\",
  \"totalFloors\": 10,
  \"yearBuilt\": 2023,
  \"wallMaterial\": \"Монолит\",
  \"entranceCount\": 4,
  \"buildingType\": \"жилой\",
  \"hasElevator\": true,
  \"dataSource\": \"manual\",
  \"confidenceLevel\": \"MEDIUM\"
}
```

## Мониторинг и обновление

### Регулярные задачи:

1. **Ежемесячно** - проверка новостроек на строительных сайтах
2. **Ежеквартально** - обновление данных из 2GIS
3. **По запросу** - добавление зданий при появлении ошибок \"адрес не найден\"

### Источники новостроек:

- Строительные компании Петропавловска
- Новости недвижимости СКО
- Объявления о вводе в эксплуатацию
- Krisha.kz раздел новостроек

## Автоматизация сбора (будущие улучшения)

### Возможные интеграции:

1. **API 2GIS** - автоматический сбор данных
2. **Парсинг krisha.kz** - мониторинг новых объявлений
3. **Геокодинг** - автоматическое определение координат
4. **ML классификация** - автоматическое определение типа здания по фото

## Troubleshooting

### Частые проблемы:

1. **\"Дублирование здания\"**
   - Проверить точность написания адреса
   - Использовать нормализованные названия улиц

2. **\"Низкое качество данных\"**
   - Повысить уровень достоверности
   - Добавить дополнительные источники

3. **\"Адрес не найден\"**
   - Проверить существование адреса на картах
   - Исправить опечатки в названии улицы

### Контакты для вопросов:

- Администратор системы: admin@happy-home.kz
- Техническая поддержка: support@happy-home.kz

---

**Дата создания**: 25.08.2025  
**Версия**: 1.0  
**Статус**: Активный документ"